<div data-controller="review-photo">
  <% reviews.each do |review| %>
    <div class="review mb-2 p-3 bg-cGray rounded-3 position-relative">
      <% if review.photo.attached? %>
        <%= cl_image_tag review.photo.key, width: 100, height: 100, crop: :limit,
                          data: { action: "click->review-photo#open", modal_url: cl_image_path(review.photo.key) } %>
      <% end %>
      <div class="d-flex justify-content-between">
        <strong class="text-cYellow"><%= review.user.username %></strong>
        <div>
          <% review.rating.to_i.times do %>
            <i class="fa-solid fa-star fs-6 text-cWhite"></i>
          <% end %>
        </div>
      </div>
      <p>"<%= review.comment %>"</p>
      <div class="created-style">
        <p><%= review.created_at.strftime("%Y-%m-%d %H:%M") %></p>
      </div>
    </div>
  <% end %>

  <%# Modal for Review Photo %>
  <div data-review-photo-target="modal" data-action="click->review-photo#closeOnOutsideClick" style="display: none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000;">
    <span data-action="click->review-photo#close" style="position: absolute; top:10px; right:20px; font-size:2rem; color: #F3B12F;">X</span>
    <img data-review-photo-target="image" style="max-width:75%; max-height:75%; border-radius:1rem;">
  </div>
</div>
